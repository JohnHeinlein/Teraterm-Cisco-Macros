; .======================================
; | Initialization
; |======================================
; |
; '--------------------------------------

; .======================================
; | Decline setup prompts
; '--------------------------------------
waitregex '\[yes\]' '\[yes/no\]' 'Switch>'; Some switches prompt for setup termination
if result = 1 then
	sendln 'yes'
	wait '[yes/no]'
	sendln 'no'
elseif result = 2 then
	sendln 'no'
endif
sendln 'en'

; .======================================
; | Wait for stdout to finish spamming after boot.
; '--------------------------------------
include 'util\stdout.ttl'

; .======================================
; | Wipe flash
; '--------------------------------------
include 'util\flash_wipe.ttl'

; .======================================
; | Wipe NVRAM again to prompt initial setup dialog
; '--------------------------------------
include dir_flash
sendln 'write erase'
wait '[confirm]'
send #13
wait 'Initialized the geometry of nvram'
pause 1

exit