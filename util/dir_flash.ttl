; Some devices will have enough files to trigger a "more" prompt when listing contents

; Cache global
timeout_tmp = timeout

timeout = 0

sendln 'dir flash:'
do
	waitregex '(MORE)|(More)' '^(([Ss]witch)|([rR]outer))[#>:]'
	if result = 1 send ' '
loop while result != 2

; Restore global & exit
timeout = timeout_tmp
exit