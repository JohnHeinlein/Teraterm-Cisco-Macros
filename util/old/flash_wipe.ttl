; ===== ===== ===== ===== =====
; Subroutine to wipe files
; Asumed globals:
;	delnum
;	filevar
; Used in models:
;	ISR4331
;	C2960 / C2960X
; ===== ===== ===== ===== =====

if delnum < 1 then 
	goto finish ; Skip deletion. Maybe check strsplit below?
endif
do
  strsplit filevar #13
  count = result			; number of files
  int2str count_str count
  
  ; debug
  ;statstr_tmp = statstr
  ;strconcat statstr_tmp #10'Files to delete: '
  ;strconcat statstr_tmp count_str
  ;statusbox statstr_tmp "Status"
  ; /debug
  
  strlen groupmatchstr1 		; Just going to trim the first file and then re-run on the first match until it's blank
  toTrim = result + 1
  strremove filevar 1 toTrim 	; Trim result from master string

  todel = 'del /r /f flash:'
  strconcat todel groupmatchstr1
  
  ; Debugging version
  ;yesnobox todel 'Confirm command:'
  ;if result = 1 sendln todel
  
  ; Prod version
  sendln todel
  
  count = count - 2 ; Probably a better way to structure this
loop while count > 0

strconcat statstr #10'... done!'
statusbox statstr hostname