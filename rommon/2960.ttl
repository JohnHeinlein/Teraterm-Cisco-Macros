; =========================
; C2960 Rommon Wipe
; =========================
; - 2960 units are not write-protected
; - Wipe a set of common files, including configs
; - Boot and clear remainder dynamically
;--------------------------------------

newstat = #10'Entering 2960.ttl'
include db

timeout = 0
setsync 1

; Init flash
sendln 'flash_init'

newstat = #10'Waiting for flash init...'
include db

do
	waitregex 'MORE' '^switch:\s$' 'already initialized\.$'
	if result = 1 send ' '
loop while result != 2

; .=========================
; | Wipe common files
; '=========================
include 'rommon\files.ttl'

; .=========================
; | Boot & wait for prompt
; '=========================
sendln 'boot'

newstat = #10'Booting SWITCH...'
include stat

wait 'Press RETURN'
send #13 ;ASCII CR

newstat = ' done!'
include stat

exit
